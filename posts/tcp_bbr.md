[TCP BBR(Bottleneck Bandwidth and Round-trip propagation time)](https://github.com/google/bbr)은 구글이 개발한 혁신적인 TCP 혼잡 제어 알고리즘으로, 기존의 손실 기반 알고리즘과 근본적으로 다른 접근 방식을 취합니다.  
BBR은 네트워크의 대역폭과 왕복 시간을 직접 모델링하여 전송 속도를 조절함으로써, 패킷 손실 없이도 최대 처리량과 최소 지연 시간을 달성하는 것을 목표로 합니다.  
이 글에서는 BBR의 핵심 원리부터 시작하여 BBR v1, v2, 그리고 최신 v3에 이르기까지의 발전 과정과 각 버전의 특징을 심층적으로 살펴보고, 리눅스 시스템에서 BBR을 적용하는 방법과 그 장단점까지 자세히 알아보겠습니다.

## BBR v1 (2016년): 알고리즘 기본 개요

BBR(Bottleneck Bandwidth and RTT) 알고리즘은 2016년 구글에서 개발한 새로운 TCP 혼잡제어 알고리즘으로, 기존 손실 기반 혼잡제어(CUBIC, Reno 등)와는 달리 모델 기반 접근을 사용합니다.  
BBR은 네트워크 경로의 벨트넥(bottleneck) 대역폭과 최소 RTT(round-trip time)를 추정하여, 그에 맞게 전송 속도를 조절하는 것을 목표로 합니다. 이를 통해 네트워크 버퍼를 최소화하면서도 최대 대역폭을 활용하도록 설계되었습니다.

BBR v1은 네트워크 상태를 세 가지 주요 상태로 나누어 운영합니다.

- **스타트업(Startup)**: 연결 초기에는 빠르게 전송 윈도우를 확장하여 네트워크가 가득 차는 파이프가 가득 찰 때까지 대역폭을 채우는 단계입니다. 이때 손실 이벤트가 발생하지 않도록 최대한 빠르게 속도를 높여 대역폭을 추정합니다.
- **프로브 대역폭(ProbeBW)**: 네트워크 경로의 벨트넥 대역폭을 정확히 파악하기 위해 전송량을 조절하여 대역폭을 탐색하는 단계입니다. 이 단계에서는 전송률을 탐색하면서, 대역폭 한계에 도달하면 한동안 대기하고, 다시 전송률을 높여 대역폭 한계를 찾는 과정을 반복합니다. 이를 통해 최대 사용 가능 대역폭을 계속 업데이트합니다.
- **프로브 지연(ProbeRTT)**: 네트워크 지연 시간을 줄이기 위해 일시적으로 전송률을 낮춰 네트워크 버퍼를 비우는 단계입니다. 이때 전송량을 감소시켜 RTT가 최소가 되는 지점을 찾고, 그 상태에서 일정 시간 유지하여 지연을 최소화합니다. 이후 다시 대역폭을 최적화하도록 ProbeBW 상태로 전환합니다.

이러한 세 단계를 순차적으로 수행함으로써 BBR v1은 대역폭과 지연을 동시에 최적화합니다. 예를 들어, 초기에는 최대 대역폭을 채우는 Startup을 통해 네트워크가 가득 찰 때까지 데이터를 보내고, 그 다음에는 ProbeBW로 가능한 한 높은 전송률을 유지하면서 일정 수준의 버퍼를 유지하는 방식입니다.  
마지막으로 ProbeRTT를 통해 버퍼를 비워 지연을 줄이는 작업을 합니다. 이러한 모델 기반 제어로 BBR v1은 기존 손실 기반 알고리즘보다 더 높은 throughput을 달성하면서도 낮은 지연을 제공할 수 있다는 것이 특징입니다.

BBR v1의 주요 장점은 네트워크 버퍼를 최소화하면서 최대 대역폭을 활용한다는 점입니다.  
이는 대규모 대역폭-지연(BDP) 환경에서 전송 효율을 극대화하고, 버퍼 과다로 인한 지연(bufferbloat)을 줄여줍니다. 또한 BBR은 손실 이벤트 없이도 혼잡을 감지하고 조절할 수 있어, 손실 이벤트 전에 미리 대응하는 점도 특징입니다. 예를 들어, 벨트넥 대역폭을 미리 파악하고 전송률을 조절함으로써 패킷 손실을 일찍이 예방할 수 있습니다.

반면 BBR v1에는 몇 가지 단점도 지적되었습니다.  
첫째, 다른 알고리즘과의 공존성 문제입니다. BBR은 손실 기반 알고리즘(CUBIC 등)과 서로 다른 기준으로 혼잡을 판단하기 때문에, 혼잡 버퍼가 적거나 경로 상에 다른 흐름이 존재할 때 서로 간의 성능이 저하되는 현상이 보고되었습니다. 예를 들어, 혼잡 버퍼가 얕고 손실이 발생하기 전에 BBR이 혼잡을 인지할 경우 전송률이 급격히 감소하여 성능이 저하될 수 있습니다.  
둘째, 전송 재전송률이 높다는 점입니다. BBR은 손실 이벤트가 없더라도 일정 범위의 일시적 손실이 발생하면 전송률을 줄이지 않고 계속 전송하므로, 버퍼에 쌓인 패킷이 다시 전송되거나 재전송이 발생하는 경우가 있습니다. 특히 이상적인 조건에서 BBR은 약 15%까지의 패킷 손실에도 대응할 수 있지만, 손실이 발생하기 전에 BBR이 전송률을 조절하지 못하면 대량의 패킷이 버퍼에 쌓여 재전송률이 크게 증가할 수 있습니다. 실제로 BBR v1은 일반적인 CUBIC 알고리즘 대비 100배 이상 높은 재전송률을 보이는 사례도 보고되었습니다. 마지막으로, 혼잡 제어에 대한 사용자의 이해 부족도 지적됩니다. BBR은 기존과 다른 접근을 취하기 때문에, 전송 데이터량이 일시적으로 감소하거나 일시적인 지연 증가가 있을 때 사용자가 혼잡을 느끼는 경향이 있습니다. 이는 네트워크 경로가 완전히 채워지기 전까지 일시적으로 전송률이 감소하는 BBR의 Startup 및 ProbeRTT 단계에서 발생합니다.

## BBR v2 (2019년): 개선된 알고리즘과 장단점

BBR v2는 BBR v1의 한계를 개선하기 위해 구글에서 2019년에 출시한 업데이트 버전입니다. BBR v2는 BBR v1의 단점들을 보완하고 성능과 공존성을 향상시킨 버전으로, 다양한 네트워크 환경에서 BBR의 장점을 유지하면서도 손실 기반 알고리즘과의 협업을 개선하는 데 초점을 맞추었습니다.

BBR v2의 주요 변경 사항은 다음과 같습니다.

- **다양한 손실 상황 대응**: BBR v2는 전통적인 손실 기반 알고리즘과의 공존성을 개선하여, Reno나 CUBIC 흐름과 함께 동작할 때 성능이 저하되는 문제를 완화했습니다. 또한 버퍼가 얕은 경로에서 전송률이 급격히 감소하는 문제도 완화하여, 버퍼 크기가 BDP의 1.5배 이하인 환경에서도 더 낮은 손실률로 고속 전송이 가능하도록 개선되었습니다. 특히 혼잡 버퍼가 얕고 손실 이벤트가 빈번한 경우에도 BBR v2는 전송률을 급격히 줄이지 않고 대체로 안정적인 성능을 유지하도록 설계되었습니다.
- **다중 흐름/망 Aggregation 대응**: BBR v2는 다수의 흐름이 하나의 경로로 모이는 망 Aggregation 환경(예: Wi-Fi AP의 다수 클라이언트 등)에서도 효율적으로 동작하도록 개선되었습니다. 이를 통해 대규모 사용자가 한 경로를 공유하는 환경에서도 각 흐름이 적절한 대역폭을 확보하고 서로 간섭 없이 효율적으로 전송할 수 있게 되었습니다.
- **ECN(Early Congestion Notification) 대응**: BBR v2는 네트워크 장치가 보내는 ECN 표시를 감지하여 혼잡 신호로 활용하는 기능을 추가했습니다. 이를 통해 DCTCP나 L4S와 같은 ECN 기반 혼잡제어와의 호환성을 높이고, 네트워크 경로에 ECN 기능이 있는 경우 더 빠르게 혼잡을 인지하여 대응할 수 있게 되었습니다.
- **ProbeRTT 최적화**: BBR v2는 ProbeRTT 단계에서 전송률을 일시적으로 낮추는 작업을 최적화하여, ProbeRTT 시 발생하는 성능 저하를 최소화했습니다. 이로써 웹 브라우징과 같은 짧은 요청 시에도 지연 증가를 최소화하면서, 필요한 경우에만 ProbeRTT를 수행하여 전체 성능에 영향을 최소화했습니다.

요약하면, BBR v2는 BBR v1의 장점을 유지하면서 다양한 환경에서의 성능과 공존성을 개선한 버전입니다. 특히 다른 혼잡제어 알고리즘과의 공존성이 크게 향상되어, BBR과 손실 기반 알고리즘이 함께 흐를 때 서로의 성능이 크게 저하되지 않도록 개선되었습니다. 또한 전송 재전송률도 개선되어, 전통적인 CUBIC 대비 재전송이 줄어들고 전체 전송 효율이 높아지는 결과를 보였습니다.

BBR v2의 장점은 앞서 언급한 대로 다양한 네트워크 조건에서 안정적이고 높은 성능을 제공한다는 점입니다. 혼잡 버퍼가 얕은 환경에서도 적절한 전송률 유지로 재전송을 줄이고, 다른 알고리즘과 함께 흐를 때도 서로 간섭을 최소화하여 협업 성능을 높이는 효과가 있습니다. 또한 ECN 기능을 활용함으로써 네트워크 장비가 제공하는 혼잡 신호를 받아들이는 더 긴밀한 혼잡 제어가 가능해졌습니다.

반면 BBR v2의 단점으로는, 전체적인 성능 면에서 BBR v1보다 다소 떨어질 수 있다는 지적이 있습니다. 일부 연구에서는 특정 네트워크 조건에서 BBR v2의 성능이 BBR v1보다 낮을 수 있다고 보고하였습니다. 예를 들어, 임의의 손실이 발생하는 환경에서 BBR v2는 손실에 보다 민감하게 반응하여 일시적으로 전송률을 낮추는 비율이 높아져 전체 전송량이 감소하는 경우가 있었습니다.  
또한 대역폭이 크고 RTT가 긴 경로에서 BBR v2의 성능 저하가 더욱 두드러졌다는 연구 결과도 있습니다. 이는 BBR v2가 손실을 감지하면 전송률을 즉각 낮추는 등의 개선으로 인해 완벽한 대역폭 채우기가 어려워질 수 있다는 의미입니다.  
다만 이러한 성능 저하는 특정 조건에서만 나타나는 것이며, 일반적인 경우 BBR v2는 BBR v1과 유사한 수준의 성능을 유지합니다. 요약하면, BBR v2는 성능과 공존성의 균형을 맞추기 위해 BBR v1보다 다소 보수적인 접근을 취한 것으로 볼 수 있습니다.

## BBR v3 (2023년): 최신 버전 및 주요 변경 사항

[BBR v3](https://github.com/google/bbr/blob/v3/README.md)는 2023년 7월에 출시된 BBR 알고리즘의 최신 버전으로, BBR v2를 기반으로 몇 가지 버그 수정과 성능 튜닝을 포함하고 있습니다. 구글 BBR팀은 BBR v3를 _"BBR v2의 소폭 개선 버전"_ 으로 소개하며, 알고리즘에 대한 몇 가지 버그를 수정하고 일부 성능 튜닝을 하였다고 밝혔습니다.

BBR v3의 주요 변경 사항은 다음과 같습니다.

- **대역폭 수렴 및 공정성 개선**: BBR v3는 대역폭 수렴 관련 버그를 수정하여, 손실이나 ECN 신호가 있는 경우에도 더 빠르게 대역폭을 수렴시키고, 손실이나 ECN 신호가 없더라도 더 안정적으로 대역폭을 수렴하도록 개선했습니다. 이를 통해 여러 흐름이 공존할 때 BBR 흐름이 더 빠르게 적정 대역폭에 도달하고, 손실이나 ECN이 없는 환경에서도 혼잡을 감지하여 대응함으로써 성능을 극대화할 수 있게 되었습니다. 구글 BBR팀은 이러한 수정으로 BBR v3에서는 "손실이나 ECN 없이도 대역폭 수렴이 이루어진다" 고 강조했습니다.
- **성능 튜닝 및 파라미터 조정**: BBR v3는 알고리즘의 일부 파라미터를 조정하여 전체 성능을 최적화했습니다. 예를 들어, Startup 단계의 전송 윈도우 확장률과 전송률(pacing) 계수를 조정하여, 네트워크를 채우는 속도를 개선했습니다. 또한 ProbeBW 단계에서 최적화된 탐색 범위를 적용하고, ProbeRTT 단계의 지연 최소화 전략을 개선하여, 전체적인 지연과 대역폭 효율을 향상시켰습니다. 이러한 튜닝으로 BBR v3는 더욱 빠르게 네트워크를 채우고 더 낮은 지연으로 유지하는 방향으로 개선되었습니다.
- **기타 버그 수정 및 개선**: BBR v3에서는 BBR v2에서 발견된 몇 가지 버그를 수정하여, 알고리즘 동작의 안정성을 높였습니다. 구체적인 내용은 공개된 자료에 상세히 나와 있지 않지만, 대역폭 추정이나 전송 제어 관련 버그가 포함될 수 있습니다. 이를 통해 BBR v3는 BBR v2보다 안정적인 동작을 보이며, 일부 성능 저하 현상이 해결되었습니다.

이러한 변경으로 BBR v3는 BBR v2의 장점을 그대로 유지하면서 더 나은 성능과 안정성을 제공하는 것으로 평가됩니다. 실제로 BBR v3를 다양한 네트워크 환경에서 테스트한 결과, 전송률과 지연 측면에서 BBR v2보다 우수한 성능을 보였다는 보고도 있습니다. 특히 버퍼가 얕은 경로에서 전송률이 급격히 떨어지는 문제나 다른 흐름과의 공존성 문제가 개선되어, 더욱 폭넓은 환경에서 BBR의 장점을 활용할 수 있게 되었습니다.

다만 BBR v3는 아직 2023년 7월에 최초 출시된 지 얼마 되지 않은 신규 버전이므로, 알고리즘 검증 기간이 비교적 짧습니다. 현재까지 공개된 결과들은 매우 긍정적인 평가를 받고 있으나, 장기적인 성능 테스트나 다양한 네트워크에서의 일관된 성능을 입증하기 위해서는 추가 연구가 필요할 수 있습니다. 그럼에도 불구하고, BBR v3는 BBR 알고리즘의 발전 방향을 잘 보여주는 버전으로, Google이 혼잡제어 기술을 계속 개선하고 있음을 시사합니다.

## 리눅스 커널에의 BBR 통합 및 지원 현황

BBR 알고리즘은 리눅스 커널에 2016년부터 통합되어 사용되고 있습니다. 구글은 BBR을 개발한 이후 리눅스 커널 팀과 협업하여 BBR을 커널에 포함시켰고, 리눅스 4.9 커널부터 BBR이 기본적으로 지원되기 시작했습니다. 리눅스 커널 4.9에서 BBR이 커밋되어 이후 릴리스된 모든 최신 리눅스 커널에서는 BBR을 사용할 수 있습니다.

다음은 BBR이 커널에 포함된 이래의 주요 이벤트입니다:

- 리눅스 4.9 (2016년 9월) – [BBR이 리눅스 커널 메인 라인에 통합](https://github.com/torvalds/linux/commit/0f8782ea14974ce992618b55f0c041ef43ed0b78)되었습니다. 이를 통해 BBR이 공식 리눅스 TCP 혼잡제어 알고리즘으로서 제공되게 되었습니다. BBR이 커널에 들어가면서 리눅스 서버나 클라이언트에서 손쉽게 BBR을 활성화할 수 있게 되었고, 이후로는 BBR이 리눅스 운영체제의 표준 TCP 알고리즘 중 하나로 자리잡았습니다.
- 리눅스 5.x 이후 – 리눅스 4.9 이후 릴리스된 모든 커널에서는 BBR이 기본적으로 사용 가능한 혼잡제어 알고리즘으로 포함되어 있습니다. 예를 들어, 리눅스 5.0, 6.0 등 최신 커널에서도 BBR을 TCP 알고리즘으로 선택하여 사용할 수 있습니다. 또한 BBR이 포함된 이후로는 리눅스 커널의 TCP 모듈에 BBR 관련 설정이 추가되었고, 모든 최신 리눅스 배포판(Ubuntu, Fedora, CentOS 등)에서는 BBR을 기본적으로 지원합니다.
- BBR v2의 통합: BBR v2는 BBR v1의 개선판으로, 2019년 초 BBR v2 알고리즘이 리눅스 커널 개발 트리에 병합되었습니다. 그러나 BBR v2는 아직 공식적으로 지원되는 커널 릴리스에 포함되지 않았으며, 리눅스 커널 개발 커뮤니티에서 별도로 검증 및 테스트가 진행 중인 상태입니다. 현재까지는 리눅스 커널의 최신 개발 브랜치(예: 5.10+)에서 BBR v2를 사용할 수 있지만, 표준 리눅스 배포판에서는 아직 BBR v1만 기본 지원되고 있습니다. 이는 BBR v2가 아직 완전히 검증되지 않았거나 커널 개발자들이 충분한 테스트를 거치지 않은 상태이기 때문입니다. 다만 2023년 BBR v3 출시 이후로는 BBR v3가 리눅스 커널 메인 라인에 통합되어, 리눅스 6.1+ 커널에서는 BBR v3가 기본 지원됩니다.

현재 리눅스 커널에서 BBR을 사용하기 위한 요구 사항은 커널 버전 4.9 이상이며, 커널 설정에 TCP BBR 모듈이 포함되어 있어야 합니다. 대부분의 최신 리눅스 배포판은 컴파일 시 BBR을 포함하도록 설정되어 있어, 명령어로 쉽게 BBR을 활성화할 수 있습니다. 예를 들어 Ubuntu 20.04부터는 BBR이 기본적으로 지원되며, 커널 5.4 이상에서는 BBR을 활성화하여 사용할 수 있습니다.

요약하면, BBR 알고리즘은 리눅스 커널 4.9 이상에서 기본 지원되며, 리눅스 6.1 이상에서는 BBR v3까지 지원됩니다. BBR v2는 커널 개발 단계에서 제공되고 있으나, 공식 지원은 아직 이루어지지 않았으며, 리눅스 배포판별로 BBR v2를 사용할 수 있는지 여부가 다릅니다. (예: 일부 커뮤니티 배포판이나 개발용 커널에서 BBR v2를 사용할 수 있으나, 표준 배포판에서는 BBR v1만 기본 지원됨.)

## 리눅스에서 BBR 적용 방법

리눅스에서 BBR을 적용하려면 커널 설정을 변경하고 TCP 혼잡제어 알고리즘을 BBR로 설정하는 과정이 필요합니다. 아래는 리눅스 서버(예: Ubuntu 또는 CentOS)를 기준으로 BBR을 활성화하는 일반적인 방법입니다.

1. **리눅스 커널 버전 확인**: BBR을 사용하려면 커널 버전이 4.9 이상이어야 합니다. 현재 커널 버전을 확인하려면 터미널에서 `uname -r` 명령을 실행합니다. 예를 들어 출력이 `5.4.0-125-generic`처럼 나오면 커널 버전 5.4로 충분히 지원됩니다. 만약 버전이 4.9 미만이라면, 커널 업그레이드가 필요합니다.
2. **TCP BBR 모듈 확인 및 로드**: 리눅스 4.9 이상 커널에서는 BBR이 커널 모듈로 포함되어 있습니다. 시스템 부팅 시 자동으로 BBR 모듈이 로드되는지 확인하거나, 필요 시 수동으로 로드할 수 있습니다. BBR 모듈은 보통 `tcp_bbr` 이름으로 제공됩니다. `lsmod | grep bbr` 명령으로 BBR 모듈이 로드되어 있는지 확인하고, 로드되지 않았다면 `modprobe tcp_bbr` 명령으로 수동 로드할 수 있습니다. 또한 부팅 시 자동 로드하려면 `/etc/modules-load.d/modules.conf` 파일에 `tcp_bbr`를 추가합니다.
3. **혼잡제어 알고리즘 설정**: BBR을 기본 혼잡제어로 사용하려면 sysctl 설정을 변경하여 `tcp_congestion_control`을 `bbr`로 설정합니다. `/etc/sysctl.conf` 파일에 다음 줄을 추가하거나, `/etc/sysctl.d/` 디렉토리에 `99-bbr.conf` 같은 파일을 만들어 다음 내용을 넣습니다

   ```shell
   net.core.default_qdisc = fq
   net.ipv4.tcp_congestion_control = bbr
   ```

   위 설정은 네트워크 큐 디스플립(queue discipline)을 `fq`(Flow Queuing)으로 설정하고, TCP 혼잡제어 알고리즘을 `bbr`로 설정하는 것입니다. `fq` 큐 디스플립은 BBR과 함께 사용하면 플로우별 대역폭을 제한하고 플로우 간 간섭을 줄여주는 효과가 있어 권장됩니다.

   설정 파일을 수정한 후에는 `sudo sysctl -p` 명령으로 변경 사항을 적용합니다. 또는 `sudo sysctl --system`을 사용하면 모든 `/etc/sysctl.d/` 파일을 한꺼번에 적용할 수 있습니다.

4. **BBR 활성화 확인**: BBR이 제대로 활성화되었는지 확인합니다. `cat /proc/sys/net/ipv4/tcp_congestion_control` 명령으로 현재 사용 중인 TCP 혼잡제어 알고리즘이 `bbr`로 표시되는지 확인합니다. 또한 `cat /proc/sys/net/core/default_qdisc` 명령으로 `fq`가 설정되었는지 확인합니다. 만약 BBR이 제대로 설정되지 않았다면, 설정 파일에 실수가 있었을 가능성이 높으므로 다시 확인합니다.
5. **네트워크 재부팅(선택 사항)**: 일부 경우 설정을 적용하려면 네트워크 인터페이스를 재시작하거나 시스템을 재부팅해야 할 수 있습니다. 하지만 일반적으로 `sysctl` 설정 변경은 실시간 적용되므로, 재부팅 없이도 바로 BBR이 활성화됩니다. 다만 시스템 부팅 시 BBR 모듈이 자동 로드되도록 했을 경우에는 부팅 후에도 계속 활성화됩니다.
6. **테스트 및 모니터링**: BBR이 활성화된 후에는 네트워크 성능을 테스트해보거나, BBR 통계 정보를 확인해볼 수 있습니다. 예를 들어 `ss -i` 명령으로 현재 활성화된 BBR 흐름의 정보를 볼 수 있습니다. BBR의 통계는 `/proc/net/tcp`나 `/proc/net/tcp6` 파일에서 볼 수도 있습니다. 이를 통해 BBR이 스타트업, ProbeBW, ProbeRTT 등의 상태를 정상적으로 전이하고 있는지 확인할 수 있습니다.

위 과정을 통해 리눅스 서버에 BBR을 적용할 수 있습니다. BBR은 모든 TCP 흐름에 자동으로 적용되므로, 변경 사항을 적용한 이후 네트워크에서 전송되는 모든 TCP 연결에 BBR이 사용됩니다. 다만 특정 프로세스나 응용 프로그램에서 TCP 알고리즘을 강제로 변경하려는 경우도 있습니다. 예를 들어 `wget`이나 `curl` 같은 명령어를 사용할 때, `--default-timeout` 옵션 등을 사용해 알고리즘을 지정할 수는 있으나, 일반적으로 시스템 전체의 기본 알고리즘을 BBR로 설정하는 것이 권장됩니다.

요약하면, 리눅스에서 BBR을 활성화하려면 커널 버전 4.9 이상을 확인하고, TCP BBR 모듈을 로드한 뒤 sysctl로 혼잡제어 알고리즘을 bbr로 설정하면 됩니다. 이후 재부팅 없이도 실시간으로 BBR이 활성화되어, 시스템의 모든 TCP 흐름에 BBR이 적용됩니다.

## BBR 적용의 장점(Pros)과 단점(Cons)

BBR 알고리즘을 시스템에 적용할 경우 몇 가지 장점이 있지만, 동시에 일부 제약이나 단점도 존재합니다. 아래에 주요 장점과 단점을 정리합니다.

| 장점 (Pros)                                                                                                                                                                                                                                                                                                                                                                              | 단점 (Cons)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **[높은 대역폭 사용률]**: BBR은 네트워크의 최대 대역폭을 효율적으로 활용하여 전송률을 극대화합니다. 이로써 큰 BDP 환경에서도 대역폭이 100%에 가까이 사용되며, 전송 효율이 향상됩니다. 특히 대규모 파일 전송이나 스트리밍 시 속도 향상이 두드러집니다.                                                                                                                                    | **[손실 이벤트에 민감]**: BBR은 손실 이벤트가 발생하기 전에 혼잡을 감지하여 대응하지만, 이미 일정량의 패킷이 버퍼에 쌓인 경우 대량의 재전송이 발생할 수 있습니다. 실제로 BBR은 일반적인 CUBIC 대비 100배 이상의 재전송률을 보이는 경우도 보고되었습니다. 이는 버퍼가 충분히 크지 않은 경로에서 전송률을 급격히 낮추지 못하는 BBR의 특성에서 유래합니다.                                                                                                                                                                                                                                  |
| **[낮은 네트워크 지연]**: BBR은 네트워크 버퍼를 최소화하면서 최적의 전송률을 유지하므로, 큐 지연을 줄여주는 효과가 있습니다. 이를 통해 웹 브라우징이나 동영상 스트리밍 등에서 요청-응답 지연이 감소하고, 실시간 서비스의 응답성이 향상됩니다. 특히 완만한 패킷 손실이 있는 환경에서 BBR은 저지연으로 높은 대역폭을 달성할 수 있습니다.                                                   | **[다른 알고리즘과의 공존성 제약]**: BBR은 손실 기반 알고리즘과 혼잡 제어 기준이 다르기 때문에, 경로 상에 손실 기반 흐름(CUBIC 등)이 함께 있는 경우 성능이 서로 저하될 수 있습니다. 예를 들어 버퍼가 얕고 손실이 빈번한 링크에서는 BBR이 혼잡을 인지하지 못해 전송률을 낮추지 못하고, 반대로 손실 기반 흐름이 손실을 감지하여 전송률을 급격히 낮추는 등 서로 간섭이 발생할 수 있습니다. 이로써 혼잡 제어의 효율이 저하되고, 경로 전체의 성능이 최적이지 않게 될 수 있습니다.                                                                                                             |
| **[혼잡 상태를 조기에 감지]**: BBR은 패킷 손실 이벤트 없이도 대역폭과 지연 모델을 기반으로 혼잡을 감지합니다. 이를 통해 손실이 발생하기 전에 전송률을 조절하여 혼잡을 사전에 방지할 수 있습니다. 이는 버퍼를 늘려 대응하는 기존 방식보다 효율적이며, 네트워크 경로를 최적 상태로 유지하는 데 기여합니다.                                                                                 | **[초기 전송률 증가 지연]**: BBR은 초기 연결 시 Startup 단계에서 전송률을 빠르게 늘리지만, 네트워크 경로가 가득 차기 전까지 일시적으로 전송률이 감소하는 단계가 있습니다. 이는 일시적으로 데이터 전송량이 감소하거나 전송 속도가 낮아지는 현상을 유발할 수 있어, 사용자 입장에서 초기 속도가 느릴 수 있다는 점이 단점입니다. 다만 이는 네트워크가 채워지는 과정이며, 이후에는 최대 속도로 전환됩니다.                                                                                                                                                                                    |
| **[버퍼 부족 문제 완화]**: BBR은 네트워크 버퍼를 최소화하도록 설계되어 있으므로, 버퍼 부족(Under-provisioning) 환경에서도 효율적인 전송이 가능합니다. 이는 경로 상의 버퍼가 작은 상황에서 기존 알고리즘이 패킷 손실로 성능이 급격히 떨어지는 문제를 완화해줍니다. BBR은 대역폭과 지연을 모니터링하여 적정한 전송률을 유지함으로써 버퍼를 채우지 않고도 최대 대역폭을 활용할 수 있습니다. | **[전송 재전송률이 높을 수 있음]**: 앞서 언급했듯이, BBR은 일시적 손실이나 버퍼 지연이 있더라도 일정 범위 내에서는 전송률을 줄이지 않고 전송합니다. 이로 인해 일시적으로 전송된 패킷이 버퍼에 쌓여 재전송이 발생하거나, 중복 ACK가 늘어나는 경우 재전송 타임아웃이 길어지는 현상이 있습니다. 이러한 재전송은 네트워크 대역폭과 대기 시간을 낭비할 수 있고, 일부 응용 프로그램에서는 오버헤드로 작용할 수 있습니다. 다만 BBR v2와 v3에서는 이러한 재전송률을 줄이는 방향으로 개선이 이루어졌습니다.                                                                                       |
| **[모든 프로토콜에 적용]**: BBR은 TCP 프로토콜에 적용되며, 모든 TCP 기반 서비스에 자동으로 적용됩니다. 이는 웹, 파일 전송, 스트리밍, 원격 접속 등 모든 TCP 흐름에 대해서 성능 개선 효과를 얻을 수 있음을 의미합니다. 또한 BBR은 서버와 클라이언트 양쪽에 모두 적용되면 네트워크 경로 전체에서 성능 향상이 이루어지므로, 이중으로 효과를 누릴 수 있습니다.                                | **[네트워크 설계에 영향]**: BBR을 활성화하면 네트워크 설계도 변경이 필요할 수 있습니다. 예를 들어 네트워크 경로 상의 라우터 버퍼가 충분히 크지 않은 경우 BBR이 전송률을 낮추지 못해 패킷이 버퍼를 넘쳐 손실이 발생할 수 있습니다. 이를 방지하려면 네트워크 설계 시 충분한 버퍼를 확보하거나, 네트워크 장비에 ECN 기능을 활성화하여 BBR이 혼잡을 인지하도록 하는 등의 조치가 필요합니다. 또한 BBR이 손실을 감지하지 않고 전송률을 유지하는 특성상, 네트워크 장비의 QoS나 경로에 있는 프록시 서버 등이 손실 없이 혼잡 신호를 전달하지 못하면 혼잡 제어가 제대로 작동하지 않을 수 있습니다. |

위 장단점을 종합하면, BBR은 대역폭 활용과 지연 측면에서 탁월한 성능을 제공하면서도 특정 조건에서 발생할 수 있는 단점도 있습니다.  
장점을 극대화하려면 BBR을 적절한 환경에서 사용하는 것이 중요합니다. 예를 들어 대규모 대역폭과 높은 BDP를 가진 경로에서 BBR을 적용하면 획기적인 속도 향상을 볼 수 있고, 완만한 손실이 있는 무선망에서도 BBR이 높은 throughput와 낮은 지연을 동시에 달성할 수 있습니다.  
반면 버퍼가 얕고 손실이 빈번한 링크에서는 BBR의 성능 저하가 우려되므로, 이런 경우에는 BBR을 활성화하기보다 기존 알고리즘 사용이나 네트워크 설계 개선이 필요할 수 있습니다.

또한 BBR 적용 시에는 네트워크 경로 전체의 설계를 고려해야 합니다. 경로 상의 모든 라우터나 스위치가 BBR을 지원하거나 ECN을 활성화하는지 확인해야 하며, 네트워크 장비의 버퍼 설정도 최적화해야 합니다.  
이러한 요소들을 고려하여 BBR을 적용하면, 대역폭 활용도와 지연을 동시에 최적화할 수 있는 장점을 극대화하고, 불리한 영향은 최소화할 수 있을 것입니다.

### 참고 자료

[1] BBR Congestion Control - IETF <https://www.ietf.org/archive/id/draft-cardwell-iccrg-bbr-congestion-control-01.html>

[2] [PDF] BBR Congestion Control: Fundamentals and Updates <https://research.cec.sc.edu/files/cyberinfra/files/BBR%20-%20Fundamentals%20and%20Updates%202023-08-29.pdf>

[3] BBR TCP (Bottleneck Bandwidth and RTT) <https://wiki.geant.org/pages/viewpage.action?pageId=121340614&src=contextnavpagetreemode>

[4] [PDF] An Evaluation of BBR and its variants - arXiv <https://arxiv.org/pdf/1909.03673>

[5] [PDF] BBR vs. BBRv2: A Performance Evaluation - Stony Brook CS <https://www3.cs.stonybrook.edu/~anshul/comsnets24_bbrbbrv2.pdf>

[6] [PDF] TCP BBR Increased throughput for Wireless-AC networks <https://jcbi.org/index.php/Main/article/download/1030/722/2740>

[7] Kernel development - LWN.net <https://lwn.net/Articles/703019/>

[8] How to Enable BBR v3 Congestion Control on Your Linux VPS ... <https://onidel.com/enable-bbr3-linux-vps/>

[9] BBR TCP - Fasterdata - ESnet <https://fasterdata.es.net/host-tuning/linux/recent-tcp-enhancements/bbr-tcp/>

[10] Path Quality Part 3: Is BBR the Future of Congestion Avoidance? <https://www.thousandeyes.com/blog/path-quality-brr-future-congestion-avoidance>

[11] [PDF] Exploring the BBRv2 Congestion Control Algorithm for use on Data ... <https://internet2.edu/wp-content/uploads/2022/12/techex22-AdvancedNetworking-ExploringtheBBRv2CongestionControlAlgorithm-Tierney.pdf>
